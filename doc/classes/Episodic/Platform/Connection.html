<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Episodic::Platform::Connection [Episodic Platform GEM documentation]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          Episodic::Platform::Connection
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../../files/lib/episodic/platform/connection_rb.html">lib/episodic/platform/connection.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>Object</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            Class used to make the actual requests to the Episodic <a
            href="../Platform.html">Platform</a> API.
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000070">new</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000072">do_get</a></li>
              <li><a href="#M000071">do_post</a></li>
            </ol>
            <h3>protected instance</h3>
            <ol>
              <li><a href="#M000074">append_common_params</a></li>
              <li><a href="#M000075">convert_params_for_request</a></li>
              <li><a href="#M000073">generate_signature_from_params</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>connection_options</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>episodic_api_key</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>episodic_secret_key</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='method public-class' id='method-M000070'>
                <a name='M000070'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(episodic_api_key, episodic_secret_key, options = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Constructor
                  </p>
                  <table>
                  <tr><td valign="top">episodic_api_key<String>:</td><td>The caller&#8217;s Episodic API Key
                  
                  </td></tr>
                  <tr><td valign="top">episodic_secret_key<String>:</td><td>The caller&#8217;s Episodic Secret Key
                  
                  </td></tr>
                  <tr><td valign="top">options<Hash>:</td><td>Used mostly for testing by allowing the caller to override some constants
                  such
                  
                  </td></tr>
                  </table>
                  <pre>the API host.</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000070-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000070-source'><span class="ruby-comment cmt"># File lib/episodic/platform/connection.rb, line 19</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">episodic_api_key</span>, <span class="ruby-identifier">episodic_secret_key</span>, <span class="ruby-identifier">options</span> = {})&#x000A;        <span class="ruby-ivar">@episodic_api_key</span> = <span class="ruby-identifier">episodic_api_key</span>&#x000A;        <span class="ruby-ivar">@episodic_secret_key</span> = <span class="ruby-identifier">episodic_secret_key</span>&#x000A;        <span class="ruby-ivar">@connection_options</span> = <span class="ruby-identifier">options</span>&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000072'>
                <a name='M000072'></a>
                <div class='synopsis'>
                  <span class='name'>do_get</span>
                  <span class='arguments'>(url, params)</span>
                </div>
                <div class='description'>
                  <p>
                  Perform the GET request to the specified URL. This method takes the params
                  passed in and generates the signature parameter using the Episodic Secret
                  Key for this connection. The signature, the Episodic API Key for this
                  connection and the passed in params are then used to generate the query
                  string.
                  </p>
                  <h4>Parameters</h4>
                  <table>
                  <tr><td valign="top">url<URI>:</td><td>The URL to the Episodic <a href="../Platform.html">Platform</a> API
                  endpoint
                  
                  </td></tr>
                  <tr><td valign="top">params<Hash>:</td><td>A hash of parameters to include include in the query string.
                  
                  </td></tr>
                  </table>
                  <h4>Returns</h4>
                  <table>
                  <tr><td valign="top">Episodic::Platform::HTTPResponse:</td><td>The full response object.
                  
                  </td></tr>
                  </table>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000072-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000072-source'><span class="ruby-comment cmt"># File lib/episodic/platform/connection.rb, line 83</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">do_get</span> <span class="ruby-identifier">url</span>, <span class="ruby-identifier">params</span>&#x000A;        &#x000A;        <span class="ruby-comment cmt"># Convert all the params to strings</span>&#x000A;        <span class="ruby-identifier">request_params</span> = <span class="ruby-identifier">convert_params_for_request</span>(<span class="ruby-identifier">params</span>)&#x000A;        &#x000A;        <span class="ruby-comment cmt"># Add in the common params</span>&#x000A;        <span class="ruby-identifier">append_common_params</span>(<span class="ruby-identifier">request_params</span>)&#x000A;        &#x000A;        <span class="ruby-identifier">queryString</span> = <span class="ruby-value str">&quot;&quot;</span>&#x000A;        <span class="ruby-identifier">request_params</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">index</span><span class="ruby-operator">|</span>&#x000A;          <span class="ruby-identifier">queryString</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{index == 0 ? '?' : '&amp;'}#{key}=#{::URI.escape(request_params[key])}&quot;</span>&#x000A;        <span class="ruby-keyword kw">end</span>&#x000A;        &#x000A;        <span class="ruby-comment cmt"># Create the request</span>&#x000A;        <span class="ruby-identifier">http</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTP</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">url</span>.<span class="ruby-identifier">host</span>, <span class="ruby-identifier">url</span>.<span class="ruby-identifier">port</span>)&#x000A;        <span class="ruby-identifier">response</span> = <span class="ruby-identifier">http</span>.<span class="ruby-identifier">start</span>() {<span class="ruby-operator">|</span><span class="ruby-identifier">req</span><span class="ruby-operator">|</span> <span class="ruby-identifier">req</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">url</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">queryString</span>)}&#x000A;        &#x000A;        <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Episodic</span><span class="ruby-operator">::</span><span class="ruby-constant">Platform</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPResponse</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">response</span>.<span class="ruby-identifier">code</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>)&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000071'>
                <a name='M000071'></a>
                <div class='synopsis'>
                  <span class='name'>do_post</span>
                  <span class='arguments'>(url, params, file_params = nil)</span>
                </div>
                <div class='description'>
                  <p>
                  Perform the POST request to the specified URL. This method takes the params
                  passed in and generates the signature parameter using the Episodic Secret
                  Key for this connection. The signature, the Episodic API Key for this
                  connection and the passed in params are then used to generate the form
                  post.
                  </p>
                  <p>
                  If there are any filenames passed then these are also included in the form
                  post.
                  </p>
                  <h4>Parameters</h4>
                  <table>
                  <tr><td valign="top">url<URI>:</td><td>The URL to the Episodic <a href="../Platform.html">Platform</a> API
                  endpoint
                  
                  </td></tr>
                  <tr><td valign="top">params<Hash>:</td><td>A hash of parameters to include include in the post request.
                  
                  </td></tr>
                  <tr><td valign="top">file_params<Hash>:</td><td>A hash of file parameters. The name is the parameter name and value is the
                  path to the file.
                  
                  </td></tr>
                  </table>
                  <h4>Returns</h4>
                  <table>
                  <tr><td valign="top">Episodic::Platform::HTTPResponse:</td><td>The full response object.
                  
                  </td></tr>
                  </table>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000071-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000071-source'><span class="ruby-comment cmt"># File lib/episodic/platform/connection.rb, line 43</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">do_post</span> <span class="ruby-identifier">url</span>, <span class="ruby-identifier">params</span>, <span class="ruby-identifier">file_params</span> = <span class="ruby-keyword kw">nil</span>&#x000A;        &#x000A;        <span class="ruby-comment cmt"># Convert all the params to strings</span>&#x000A;        <span class="ruby-identifier">request_params</span> = <span class="ruby-identifier">convert_params_for_request</span>(<span class="ruby-identifier">params</span>)&#x000A;        &#x000A;        <span class="ruby-comment cmt"># Add in the common params</span>&#x000A;        <span class="ruby-identifier">append_common_params</span>(<span class="ruby-identifier">request_params</span>)&#x000A;        &#x000A;        <span class="ruby-identifier">c</span> = <span class="ruby-constant">Curl</span><span class="ruby-operator">::</span><span class="ruby-constant">Easy</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">url</span>.<span class="ruby-identifier">to_s</span>)  &#x000A;        <span class="ruby-identifier">c</span>.<span class="ruby-identifier">multipart_form_post</span> = <span class="ruby-keyword kw">true</span>&#x000A;        &#x000A;        <span class="ruby-identifier">fields</span> = []&#x000A;        <span class="ruby-identifier">request_params</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>&#x000A;          <span class="ruby-identifier">fields</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Curl</span><span class="ruby-operator">::</span><span class="ruby-constant">PostField</span>.<span class="ruby-identifier">content</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>)&#x000A;        <span class="ruby-keyword kw">end</span>&#x000A;        <span class="ruby-identifier">file_params</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>&#x000A;          <span class="ruby-identifier">fields</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Curl</span><span class="ruby-operator">::</span><span class="ruby-constant">PostField</span>.<span class="ruby-identifier">file</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>) &#x000A;        <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">file_params</span>.<span class="ruby-identifier">nil?</span>&#x000A;        &#x000A;        <span class="ruby-comment cmt"># Make the request</span>&#x000A;        <span class="ruby-identifier">c</span>.<span class="ruby-identifier">http_post</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">fields</span>)&#x000A;        &#x000A;        <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Episodic</span><span class="ruby-operator">::</span><span class="ruby-constant">Platform</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPResponse</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">c</span>.<span class="ruby-identifier">response_code</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">body_str</span>)&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Protected instance methods</h2>
              <div class='method protected-instance' id='method-M000074'>
                <a name='M000074'></a>
                <div class='synopsis'>
                  <span class='name'>append_common_params</span>
                  <span class='arguments'>(params)</span>
                </div>
                <div class='description'>
                  <p>
                  Apply the common Episodic params such as expires, signature and key
                  </p>
                  <h4>Parameters</h4>
                  <table>
                  <tr><td valign="top">params<Hash>:</td><td>The params to update.
                  
                  </td></tr>
                  </table>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000074-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000074-source'><span class="ruby-comment cmt"># File lib/episodic/platform/connection.rb, line 130</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">append_common_params</span> <span class="ruby-identifier">params</span>&#x000A;        &#x000A;        <span class="ruby-comment cmt"># Add an expires value if it has not been added already</span>&#x000A;        <span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;expires&quot;</span>] <span class="ruby-operator">||=</span> (<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">+</span> <span class="ruby-value">30</span>).<span class="ruby-identifier">to_s</span>&#x000A;        &#x000A;        <span class="ruby-comment cmt"># Sign the request</span>&#x000A;        <span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;signature&quot;</span>] = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">generate_signature_from_params</span>(<span class="ruby-identifier">params</span>)&#x000A;        &#x000A;        <span class="ruby-comment cmt"># Add our key</span>&#x000A;        <span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;key&quot;</span>] = <span class="ruby-ivar">@episodic_api_key</span>        &#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-M000075'>
                <a name='M000075'></a>
                <div class='synopsis'>
                  <span class='name'>convert_params_for_request</span>
                  <span class='arguments'>(params)</span>
                </div>
                <div class='description'>
                  <p>
                  Converts all parameters to a form for a request. This includes converting
                  arrays to comma delimited strings, Times to integers and Hashes to a form
                  depending on its level in the passed in params.
                  </p>
                  <h4>Parameters</h4>
                  <table>
                  <tr><td valign="top">params<Hash>:</td><td>The params to convert.
                  
                  </td></tr>
                  </table>
                  <h4>Returns</h4>
                  <table>
                  <tr><td valign="top">Hash:</td><td>A single level hash where all keys and values are strings.
                  
                  </td></tr>
                  </table>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000075-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000075-source'><span class="ruby-comment cmt"># File lib/episodic/platform/connection.rb, line 154</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">convert_params_for_request</span> <span class="ruby-identifier">params</span>&#x000A;        <span class="ruby-identifier">result</span> = {}&#x000A;        &#x000A;        <span class="ruby-identifier">params</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>&#x000A;          &#x000A;          <span class="ruby-comment cmt"># We don't want to deal with nils</span>&#x000A;          <span class="ruby-identifier">value</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span>&#x000A;          &#x000A;          <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;            <span class="ruby-comment cmt"># Convert to a comma delimited string</span>&#x000A;            <span class="ruby-identifier">result</span>[<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;,&quot;</span>)&#x000A;          <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Time</span>)&#x000A;            <span class="ruby-comment cmt">#Convert the time to an integer (then string)</span>&#x000A;            <span class="ruby-identifier">result</span>[<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_i</span>.<span class="ruby-identifier">to_s</span>&#x000A;          <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)&#x000A;            <span class="ruby-comment cmt"># Used for custom fields</span>&#x000A;            <span class="ruby-identifier">value</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sub_key</span>, <span class="ruby-identifier">sub_value</span><span class="ruby-operator">|</span>&#x000A;              <span class="ruby-identifier">sub_value</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sub_value</span>.<span class="ruby-identifier">nil?</span>&#x000A;              <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">sub_value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Time</span>))&#x000A;                <span class="ruby-identifier">result</span>[<span class="ruby-node">&quot;#{key.to_s}[#{sub_key.to_s}]&quot;</span>] = <span class="ruby-identifier">sub_value</span>.<span class="ruby-identifier">to_i</span>.<span class="ruby-identifier">to_s</span>&#x000A;              <span class="ruby-keyword kw">elsif</span> (<span class="ruby-identifier">sub_value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>))&#x000A;                <span class="ruby-comment cmt"># Put the hash in the external select field form</span>&#x000A;                <span class="ruby-identifier">val</span> = <span class="ruby-value str">&quot;&quot;</span>&#x000A;                <span class="ruby-identifier">sub_value</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>&#x000A;                  <span class="ruby-identifier">val</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{k}|#{v};&quot;</span>&#x000A;                <span class="ruby-keyword kw">end</span>&#x000A;                <span class="ruby-identifier">result</span>[<span class="ruby-node">&quot;#{key.to_s}[#{sub_key.to_s}]&quot;</span>] = <span class="ruby-identifier">val</span>&#x000A;              <span class="ruby-keyword kw">else</span>&#x000A;                <span class="ruby-identifier">result</span>[<span class="ruby-node">&quot;#{key.to_s}[#{sub_key.to_s}]&quot;</span>] = <span class="ruby-identifier">sub_value</span>.<span class="ruby-identifier">to_s</span>&#x000A;              <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-keyword kw">end</span> &#x000A;          <span class="ruby-keyword kw">else</span>&#x000A;            <span class="ruby-identifier">result</span>[<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span> &#x000A;          <span class="ruby-keyword kw">end</span>&#x000A;        <span class="ruby-keyword kw">end</span>&#x000A;        &#x000A;        <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span>&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-M000073'>
                <a name='M000073'></a>
                <div class='synopsis'>
                  <span class='name'>generate_signature_from_params</span>
                  <span class='arguments'>(params)</span>
                </div>
                <div class='description'>
                  <p>
                  Helper method to generate the request signature
                  </p>
                  <h4>Parameters</h4>
                  <table>
                  <tr><td valign="top">params<Hash>:</td><td>The set of params that will be passed either in the form post or in the
                  
                  </td></tr>
                  </table>
                  <pre>query string.</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000073-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000073-source'><span class="ruby-comment cmt"># File lib/episodic/platform/connection.rb, line 113</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">generate_signature_from_params</span> <span class="ruby-identifier">params</span>&#x000A;        <span class="ruby-identifier">sorted_keys</span> = <span class="ruby-identifier">params</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">y</span>.<span class="ruby-identifier">to_s</span> }&#x000A;        <span class="ruby-identifier">string_to_sign</span> = <span class="ruby-ivar">@episodic_secret_key</span>&#x000A;        <span class="ruby-identifier">sorted_keys</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>&#x000A;          <span class="ruby-identifier">string_to_sign</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;#{key.to_s}=#{params[key]}&quot;</span>&#x000A;        <span class="ruby-keyword kw">end</span>&#x000A;        &#x000A;        <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">SHA256</span>.<span class="ruby-identifier">hexdigest</span>(<span class="ruby-identifier">string_to_sign</span>) &#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
